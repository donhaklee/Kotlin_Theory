# 1. ViewModel

activity(data, binding, logic) + layout.xml(ui=view)<br>


AAC : ViewModel + DataBinding + LiveData<br>

핸드폰을 가로로 돌릴 때 데이터가 다 날아간다. 그것을 보안하는 코딩


```kotlin
private lateinit var viewModel: MyViewModel
private lateinit var viewModelFactory: MyViewModleFactory

override fun onCreate(savedInstanceState: Bundel?){
  super.onCreate(savedInstanceState)
  setContentView(R.layout.activity_main)
  
  viewModelFactory = MyViewModelFactory(100)
  
  viewModel = ViewModelProvider(this, viewModelFactory).get(MyViewModel::class.java) // singleton => viewModel = MyViewModel()이라고 하면 안됨
  
  val textView = findeViewById<TextView>
  //textView.text = counter.toString()
  textView.text = viewModel.getValue().toString()
  findeViewById<Button>(R.id.button).setOnClickListener {
    //counter++
    textView.text = counter.toString()
  }
}

```

```kotlin

private var counter = 0
fun getValue(): Int = counter
fun increaseValue() : Int = ++counter


```



```kotlin

class MyViewModelFactory(private val value: Int) : ViewModelProvider.Factory {
  override fun<T: ViewModel?> create(modelClass: Class<T>): T{
      if(modelClass.isAssignableFrom(MyViewModel::class.java)) {
        return MyViewModel(value) as T
      }
      throw IllegalArgumentException("Undefined ViewModel class")
  }
}
```
